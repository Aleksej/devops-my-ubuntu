---

- hosts: laptop
  become: yes
  become_method: sudo

  vars:
    user: achtmhz
    user_group: achtmhz
    hostname: mordoror
    user_home: /home/{{ user }}
    venv_home: "{{ user_home }}"

  pre_tasks:
    - name: rename host
      hostname: name={{ hostname }}

  tasks:
    - name: data analysis
      apt: name={{ item }} state=latest
      with_items:
       - r-base
       - r-base-dev
       - octave

    - name: aws command line interface
      pip: name=awscli state=latest

  roles:
    - { role: setup-user, tags: ['setup'] }
    - { role: system-tools, tags: ['systools'] }
    - { role: dev-tools, tags: ['devtools'] }
    - { role: devops, tags: ['ops'] }
    - { role: py-dev, tags: ['python'] }
    - { role: py-data-analysis, tags: ['pydata'] }
    - { role: java-dev, tags: ['java'] }


# got oh-my zsh installed but chsh fails
# try with sudo sh -c "..."
- hosts: laptop
  vars:
    user: achtmhz
  become_user: "{{ user }}"
  become_method: sudo

  tasks:
    - name: copy bash aliases
      copy: src=./files/aliases dest=/home/{{ user }}/.bash_aliases owner={{ user }} group={{ user }} mode=0644
    - name: copy vi .exrc
      copy: src=./files/exrc dest=/home/{{ user }}/.exrc owner={{ user }} group={{ user }} mode=0644

    - name: oh-my zsh
      shell: sh -c "$(wget https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh -O -)"

